<!DOCTYPE html>
<html>
<head>
<title>Aquicklymadeshootyygame</title>
</head>
<body>
<img src="https://cdn.discordapp.com/attachments/984914808182800384/1044339170564391122/Wall.png" style="display:none" id = "wall"/>
<img src = "https://cdn.discordapp.com/attachments/984914808182800384/1044336503041568859/Player_for_shooter.png"style="display:none"   id = "player"/>
<img src = "https://cdn.discordapp.com/attachments/984914808182800384/1044336391586316398/Enemy_for_shooter.png" style="display: none" id = "enemy"/>
<img src = "https://cdn.discordapp.com/attachments/984914808182800384/1044335705230430238/Bullet.png" style="display: none" id = "default_bullet"/>
<canvas id="one" width = "1000px" height ="1000px"></canvas>
<script>
//variable and canvas setup
var canvas = document.getElementById("one");
var ctx = canvas.getContext("2d");
var bulletss=[];
var walls= [];
var enemies=[];
var levels=[];
var spawnPoints=[];
var powerUps=[];
var  playerC = 0;
var ans;
var opp;
    var done =0;
var adj;
var almost;
    var E = 0;
  var q = 0;

  var eq =0;
  var eans;
var eopp;
var eadj;
var ealmost;
var enemyC = document.getElementById("enemy");
var wall = document.getElementById("wall");
var player= document.getElementById("player");
var bullet = document.getElementById("default_bullet");
function radians_to_degrees(radians) {
  return radians * (180 / Math.PI);
}
//enemy object
enemy= function(x,y,maxHealth,wepDamage,rotation,xmotion,ymotion){
this.x = x;
this.y=y;
this.health= maxHealth;
this.maxHealth = maxHealth;
this.wepDamage = wepDamage;
this.isResting=true;
this.wakeDistance=180;
this.rotation=rotation;
  this.cdd=0;
  this.cd=0;
};
  EE = function(obj){
  obj.cd =0;
  obj.cdd=0;
  }
//player object
players= function(x,y,maxHealth,wepDamage, speed=1,rotation,xmotion,ymotion){
this.x = x;
this.y=y;
this.width=62.5;
this.height=62.5;
this.health= maxHealth;
this.maxHealth = maxHealth;
this.wepDamage = wepDamage;
this.rotation=rotation;
this.xmotion=xmotion;
this.ymotion=ymotion;
  this.cd=0;
};
//wall object
stopper=function(x,y){
this.x = x*138;
this.y=y*138;
this.xt=this.x+125;
this.yt=this.y+125;
}
// spawning creatures/items
spawnPoint=function(x,y,type, cooldown,uses,power){
this.x=x;
this.y=y;
this.type=type;
this.cooldown=cooldown;
this.uses=uses;
  this.power=power;
}
//bullets
bullets=function(x,y,type,shooter,shooterTeam,motionX,motionY,rotation){
this.x = x;
  this.y = y;
  this.rotation = rotation;
  this.type=type;
this.shooter=shooter;
this.shooterTeam= shooterTeam;
this.motionX=motionX;
this.motionY=motionY;
}
 enemy.prototype.fire = function(){


   if(eq==1){
      var s =  this.rotation;

  }else if(eq==2){
    var s =  this.rotation-90;
  }else if(eq==3){
       var s =  this.rotation-180;
  }else if(eq==4){
   var s =  this.rotation-270;
  }
  var so = s*10/9;
  var st = (so/100)*12;
  var sh = 12-st;
  if(eq==1){
  st = st;
   sh = sh;
  }else if(eq==2){
    st = st*-1;
   sh = sh;
     bulletss.push(new bullets(this.x,this.y,"reg",this,"enemy",st,sh,this.rotation+90));
    this.cd=1;
 
    return;
  }else if(eq==3){
    st = st*-1;
   sh = sh*-1;
  }else if(eq==4){
    st = st;
   sh = sh*-1;
         bulletss.push(new bullets(this.x,this.y,"reg",this,"enemy",st,sh,this.rotation+90));
    this.cd=1;

    return;
  }
   bulletss.push(new bullets(this.x,this.y,"reg",this,"enemy",sh,st,this.rotation+90));
     this.cd=1;
 
   }
//drawing things
enemy.prototype.draw=function(){
var translateX= this.x+(62.5/2);
var translateY= this.y+(62.5/2);
ctx.save();
ctx.translate(translateX,translateY);
ctx.rotate(this.rotation*Math.PI/180);
ctx.translate(-translateX,-translateY);
ctx.drawImage(enemyC,this.x,this.y,62.5,62.5);
ctx.restore();}
  //bullets
bullets.prototype.draw=function(){
var translateX= this.x+((62.5/3.1622)/2);
var translateY= this.y+((62.5/3.1622)/2);
ctx.save();
ctx.translate(translateX,translateY);
ctx.rotate(this.rotation*Math.PI/180);
ctx.translate(-translateX,-translateY);
ctx.drawImage(bullet,this.x,this.y,(62.5)/3.1622,(62.5)/3.1622);
ctx.restore();}

players.prototype.draw=function(){

var translateX= this.x+(62.5/2);
var translateY= this.y+(62.5/2);
ctx.save();
ctx.translate(translateX,translateY);
ctx.rotate(this.rotation*Math.PI/180);
ctx.translate(-translateX,-translateY);
ctx.drawImage(player,this.x,this.y,62.5,62.5);
ctx.restore();

};
  //bullet shooting
fire = function(){
  //some math that might not work

    if(q==1){
      var s =  playerC.rotation;

  }else if(q==2){
    var s =  playerC.rotation-90;
  }else if(q==3){
       var s =  playerC.rotation-180;
  }else if(q==4){
   var s =  playerC.rotation-270;
  }
  var so = s*10/9;
  var st = (so/100)*12;
  var sh = 12-st;
  if(q==1){
  st = st;
   sh = sh;
  }else if(q==2){
    st = st*-1;
   sh = sh;
     bulletss.push(new bullets(playerC.x,playerC.y,"reg",playerC,"player",st,sh,playerC.rotation+90));
    return;
  }else if(q==3){
    st = st*-1;
   sh = sh*-1;
  }else if(q==4){
    st = st;
   sh = sh*-1;
         bulletss.push(new bullets(playerC.x,playerC.y,"reg",playerC,"player",st,sh,playerC.rotation+90));
    return;
  }
   bulletss.push(new bullets(playerC.x,playerC.y,"reg",playerC,"player",sh,st,playerC.rotation+90));
 
  }
  //bullet motion
  bullets.prototype.move= function(){
  this.x +=this.motionX;
    this.y +=this.motionY;
  };
stopper.prototype.draw = function(){
ctx.drawImage(wall,this.x,this.y,125,125);
}
stopper.prototype.detect = function(obj){
if((obj.x+obj.width)>(this.x-3)&&(obj.x+obj.width)<this.xt+5&&(obj.y+obj.height)>(this.y-6)&&(obj.y+obj.height)<this.yt+9){
obj.xmotion *= -1;
  obj.ymotion *= -1;
    
    obj.x+=obj.xmotion;
    obj.y+=obj.ymotion;
done=1;
    done=1;
}else if(obj.x+4>this.x-13&&obj.x<this.xt+9&&obj.y>this.y-6&&obj.y<this.yt+6){
obj.xmotion *= -1;
  obj.ymotion *= -1;
    obj.x+=obj.xmotion;
    obj.y+=obj.ymotion;
done=1;
}else{return;};
}
  //loading the level
loadlevel = function(w,h,level){
  var m=0;
for(var i =0; i<((w*h)-((w-1)*(h-1)));i++){
  if(i<w){
walls.push(new stopper(i,0));
    walls.push(new stopper(i,(h-1)));
  }else if(m<h){

  walls.push(new stopper(0,m));
    walls.push(new stopper((w-1),m));
       m++;
  }  
}
  game();
};
  spawnPoint.prototype.spawn = function(){
    if(this.uses>0){
  if(this.type =="enemy"){
  enemies.push(new enemy(this.x,this.y,3,this.power,0,0,0));
  this.uses--;
  }else{ playerC.x= this.x; playerC.y=this.y; this.uses--;}}
  }
  var sp = new spawnPoint(300,300,"enemy",0,1,2);
playerC= new players(250,250,3,1,0,0);
//math is pain.
point = function(e){

adj = Math.abs((playerC.x+(62.5/2))-e.offsetX);
opp = Math.abs((playerC.y+(62.5/2))-e.offsetY);

almost = opp/adj;
ans = radians_to_degrees(almost);

 if(playerC.x+(62.5/2)<e.offsetX&&playerC.y+(62.5/2)<e.offsetY){
if (ans>90){
 ans = 90;
}else if(ans<0){
 ans= 0;
}
   q=1;
playerC.rotation=ans;
return;
}else if(playerC.x+(62.5/2)>e.offsetX&&playerC.y+(62.5/2)<e.offsetY){
ans= 180-ans;
if (ans<90){
 ans= 90;
}else if(ans>180){
 ans = 270;
}
  q=2;
playerC.rotation=ans;
return;
}else if(playerC.x+(62.5/2)>e.offsetX&&playerC.y+(62.5/2)>e.offsetY){
ans=180+ans;
if (ans>270){
ans = 270;
}else if(ans<0){
ans = 180;
}
  q=3;
playerC.rotation= ans;
return;
}else if(playerC.x+(62.5/2)<e.offsetX&&playerC.y+(62.5/2)>e.offsetY){
ans= 360-ans;
if (ans>360){
ans = 360;
}else if(ans<270){
ans = 270;
}
  q=4;
playerC.rotation=ans;
return;
}
}

 enemy.prototype.dist = function(obj){
 var p = Math.abs((obj.x+(62.5/2))-this.x+(62.5/2));
var o = Math.abs((obj.y+(62.5/2))-this.y+(62.5/2));
var m = Math.pow(p,2);
   var n = Math.pow(o,2);
   var b = m+n;
   var c = Math.sqrt(b);
   return c;
 }
//math is pain.
enemy.prototype.point = function(){
if(this.isResting==false){
eadj = Math.abs((playerC.x+(62.5/2))-this.x+(62.5/2));
eopp = Math.abs((playerC.y+(62.5/2))-this.y+(62.5/2));

ealmost = eopp/eadj;
eans = radians_to_degrees(ealmost);

 if(this.x+(62.5/2)<playerC.x+(62.5/2)&&this.y+(62.5/2)<playerC.y+(62.5/2)){
if (eans>90){
 eans = 90;
}else if(eans<0){
 eans= 0;
}
   eq=1;
this.rotation=eans;
return;
}else if(this.x+(62.5/2)>playerC.x+(62.5/2)&&this.y+(62.5/2)<playerC.y+(62.5/2)){
eans= 180-eans;
if (eans<90){
 eans= 90;
}else if(eans>180){
 eans = 270;
}
  eq=2;
this.rotation=eans;
return;
}else if(this.x+(62.5/2)>playerC.x+(62.5/2)&&this.y+(62.5/2)>playerC.y+(62.5/2)){
eans=180+eans;
if (eans>270){
eans = 270;
}else if(eans<0){
eans = 180;
}
  eq=3;
this.rotation= eans;
return;
}else if(this.x+(62.5/2)<playerC.x+(62.5/2)&&this.y+(62.5/2)>playerC.y+(62.5/2)){
eans= 360-eans;
if (eans>360){
eans = 360;
}else if(eans<270){
eans = 270;
}
  eq=4;
this.rotation=eans;
return;
}
}}

move = function(e){
if(e.keyCode===37||e.keyCode===65){
  playerC.xmotion = -6.25;
  playerC.x += playerC.xmotion;
        for(var i = 0; i<walls.length; i++){
    if(done==0){
walls[i].detect(playerC);}else{return}}
}
 if(e.keyCode===38||e.keyCode===87){
 playerC.ymotion = -6.25;
   playerC.y += playerC.ymotion;
         for(var i = 0; i<walls.length; i++){
    if(done==0){
walls[i].detect(playerC);}else{return}}
}
 if(e.keyCode===39||e.keyCode===68){
 playerC.xmotion = 6.25;
   playerC.x += playerC.xmotion;
         for(var i = 0; i<walls.length; i++){
    if(done==0){
walls[i].detect(playerC);}else{return}}
}
if(e.keyCode===40||e.keyCode===83){
 playerC.ymotion = 6.25;
  playerC.y += playerC.ymotion;
    for(var i = 0; i<walls.length; i++){
    if(done==0){
walls[i].detect(playerC);}else{return}}

}
}
  enemy.prototype.move = function(){
    
if(e.keyCode===37||e.keyCode===65){
  playerC.xmotion = -6.25;
  playerC.x += playerC.xmotion;
}
 if(e.keyCode===38||e.keyCode===87){
 playerC.ymotion = -6.25;
   playerC.y += playerC.ymotion;
}
 if(e.keyCode===39||e.keyCode===68){
 playerC.xmotion = 6.25;
   playerC.x += playerC.xmotion;
}
if(e.keyCode===40||e.keyCode===83){
 playerC.ymotion = 6.25;
  playerC.y += playerC.ymotion;
}
}
playerC= new players(260,270,3,1,0,0);
game = function(){
  sp.spawn();

ctx.clearRect(0,0,10000,10000);
playerC.draw();
document.addEventListener("keydown",move);

for(var i = 0; i<enemies.length; i++){
enemies[i].point();
  enemies[i].draw();
  if(enemies[i].dist(playerC)<150){
  enemies[i].isResting=false;
  }


if(bulletss.length>0){
  if(enemies[i].dist(playerC)<200&&enemies[i].isResting==false&&enemies[i].dist(bulletss[bulletss.length-1])>500){
  enemies[i].fire();
  }}else{enemies[i].fire();}
  
}
 done=0; 
for(var i = 0; i<walls.length; i++){
walls[i].draw();}

for(var i = 0; i<bulletss.length; i++){
bulletss[i].draw();
bulletss[i].move();}

window.requestAnimationFrame(game);
    

};
  playerC.xmotion=0; playerC.ymotion=0;
canvas.addEventListener("mousemove",point);
  canvas.addEventListener("click",fire);
loadlevel(5,5,0);
</script>
</body></html>
